/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:6.1.0'
    }
}

plugins {
    id 'java'
    id 'java-library'
    id 'maven-publish'
}

allprojects {
    group = 'net.yatopia'
    version = '0.0.1-SNAPSHOT'
    sourceCompatibility = System.getenv("JAVA_COMPILE_TARGET") ? System.getenv("JAVA_COMPILE_TARGET") : "1.8"
}

configure(subprojects - project(':all')) {
    apply plugin: 'maven-publish'
    apply plugin: 'java-library'
    apply plugin: 'java'

    repositories {
        mavenLocal()
        mavenCentral()
    }

    publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
            }
        }
    }

    dependencies {
        api 'com.google.code.findbugs:jsr305:1.3.9'
        testImplementation 'junit:junit:4.11'
        testImplementation 'org.apache.logging.log4j:log4j-core:2.8.1'
        compileOnly 'org.apache.logging.log4j:log4j-api:2.8.1'
        compileOnly 'com.google.guava:guava:30.0-jre'
        compileOnly group: 'com.google.code.gson', name: 'gson', version: '2.8.0'
        testImplementation group: 'com.google.code.gson', name: 'gson', version: '2.8.0'
        testImplementation 'com.google.guava:guava:30.0-jre'
    }

    test {
        testLogging {
            events "passed", "skipped", "failed", "standard_out", "standard_error"
            showStackTraces true
            exceptionFormat "full"
        }
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}
